#!/usr/bin/env ruby

require 'debci'
require 'debci/status'
require 'debci/job'
require 'thor'

module Debci
  class JobCLI < Thor

    desc 'import STATUS_FILE', 'Marks job as finished'
    def import(status_file)
      Debci::Job.import(status_file, suite, arch)
    end

    desc 'declare-queue', 'Initializes job queue'
    def declare_queue
      Debci::Job.get_queue(Debci.config.arch)
    end

    no_commands do
      def arch
        Debci.config.arch
      end
      def suite
        Debci.config.suite
      end
    end

  end
end

Debci::JobCLI.start
